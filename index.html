<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <title>WTFCode</title>
    <script type="text/javascript">
      // WTFCode by Asicosilomu. Version 1.3.6.
      // TEH LANGUAGE OF TEH GODS!1!1!1!!!1!!!!!1!111!!

      // WTFCode modules(TM) Extend WTFCode functionality with WTFCode!
      var modules = {
        "dialogs": `
          function alert [string text]
              return returnvalue (ecfjs returnvalue (prop get returnvalue (jseval window) string "alert") returnvalue (var get text))
          escape

          function confirm [string text]
              return returnvalue (ecfjs returnvalue (prop get returnvalue (jseval window) string "confirm") returnvalue (var get text))
          escape

          function prompt [string text string dvalue]
              return returnvalue (ecfjs returnvalue (prop get returnvalue (jseval window) string "prompt") returnvalue (var get text) returnvalue (var get dvalue))
          escape
        `
      }

      window.WTFCode = {};
      window.WTFCode.evaluate = function(code = `throw string "You must specify a program to run!"`, variables = {}, functions = {}, isFunction = false)
      {
        var lines = code.split("\n");
        var returnValue = null;
        var i = 0;
        for (i = 0; i < lines.length; i++)
        {
          var line = lines[i].trim();
          var instruction = line.split(" ")[0];
          if (instruction.toUpperCase() == "SHOW")
          {
            var i2 = 1; var s = line.split(" ");
            var logLevel = s[1].toLowerCase();
            var func = Function("out", "console." + logLevel + "(out);");
            var params = "";
            for (i2 = 2; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            for (i2 = 1; i2 < params.length - 1; i2 += 2) { if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { func(params[i2]); } else { func(window.WTFCode.evaluate(params[i2].toString(), variables, functions)); }; };
          } else if (instruction.toUpperCase() == "THROW")
          {
            var stuff = line.substr(instruction.length + 1, line.length - 1);
            stuff = parseParams(stuff);
            if (stuff[0].toUpperCase() == "RETURNVALUE") { throw new Error(window.WTFCode.evaluate(stuff[1], variables, functions)); } else { throw new Error(stuff[1]); };
          } else if (instruction.toUpperCase() == "IF")
          {
            var data = parsestat(lines, line, instruction, i);
            i = data.i;
            if (window.WTFCode.evaluate(data.condition, variables, functions)) { var response = window.WTFCode.evaluate(data.toExec, variables, functions); if (response != null) { return response; }; };
          } else if (instruction.toUpperCase() == "JSEVAL")
          {
            var condition = " ";
            var split = line.split(" ");
            var i3 = 1;
            for (i3 = 1; i3 < split.length; i3++)
            {
              condition += " " + split[i3];
            };
            returnValue = Function("return" + condition + ";")();
          } else if (instruction.toUpperCase() == "RETURN")
          {
            var stuff = line.substr(instruction.length + 1, line.length - 1);
            stuff = parseParams(stuff);
            if (stuff[0].toUpperCase() == "RETURNVALUE") { if (!isFunction) { return window.WTFCode.evaluate(stuff[1], variables, functions); } else { returnValue = window.WTFCode.evaluate(stuff[1], variables, functions); }; } else { if (!isFunction) { return stuff[1]; } else { returnValue = stuff[1]; }; };
          } else if (instruction.toUpperCase() == "VARIABLE" || instruction.toUpperCase() == "VAR")
          {
            var spl = line.split(" ");
            var mode = spl[1];
            var dataType = spl[2];
            var i3 = 2;
            if (mode.toUpperCase() == "GET") returnValue = variables[spl[2]];
            if (mode.toUpperCase() == "SET")
            {
              var thing = parseParams(dataType + " " + line.substr(instruction.length + 1 + mode.length + 1 + dataType.length + 1 + spl[3].length + 1, line.length - 1));
              if (thing[0].toUpperCase() == "RETURNVALUE") { variables[spl[3]] = window.WTFCode.evaluate(thing[1], variables, functions); } else { variables[spl[3]] = thing[1]; };
            };
          } else if (instruction.toUpperCase() == "DOM")
          {
            var spl = line.split(" ");
            var mode = spl[1];
            var dataType = spl[2];
            if (mode.toUpperCase() == "CREATE")
            {
              var thing = parseParams(dataType + " " + spl[3]);
              if (thing[0].toUpperCase() == "RETURNVALUE") { var name = window.WTFCode.evaluate(thing[1], variables, functions); } else { var name = thing[1]; };
              returnValue = document.createElement(name.toString());
            };
          } else if (instruction.toUpperCase() == "PROPERTY" || instruction.toUpperCase() == "PROP")
          {
            var spl = line.split(" ");
            var mode = spl[1]; var i2 = 0;
            var thing = "";
            for (i2 = 2; i2 < spl.length; i2++) thing += spl[i2] + " ";
            thing = parseParams(thing);
            if (thing[0].toUpperCase() == "RETURNVALUE") { var object = window.WTFCode.evaluate(thing[1], variables, functions); } else { var object = thing[1]; };
            if (thing[2].toUpperCase() == "RETURNVALUE") { var prop = window.WTFCode.evaluate(thing[3], variables, functions); } else { var prop = thing[3]; };
            if (thing[4]) { if (thing[4].toUpperCase() == "RETURNVALUE") { var val = window.WTFCode.evaluate(thing[5], variables, functions); } else { var val = thing[5]; }; };
            if (mode.toUpperCase() == "GET")
            {
              returnValue = object[prop];
            };
            if (mode.toUpperCase() == "SET")
            {
              object[prop] = val;
            };
          } else if (instruction.toUpperCase() == "CONCAT")
          {
            var i2 = 1; var s = line.split(" "); var fin = "";
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            for (i2 = 1; i2 < params.length - 1; i2 += 2) { if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { fin += params[i2].toString(); } else { fin += window.WTFCode.evaluate(params[i2].toString(), variables, functions).toString(); }; };
            returnValue = fin;
          } else if (instruction.toUpperCase() == "ADD" || instruction.toUpperCase() == "SUM")
          {
            var i2 = 1; var s = line.split(" "); var fin = 0;
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            for (i2 = 1; i2 < params.length - 1; i2 += 2) { if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { fin += Number(params[i2]); } else { fin += Number(window.WTFCode.evaluate(params[i2].toString(), variables, functions)); }; };
            returnValue = fin;
          } else if (instruction.toUpperCase() == "SUBTRACT" || instruction.toUpperCase() == "SUB" || instruction.toUpperCase() == "DEDUCT" || instruction.toUpperCase() == "DED")
          {
            var i2 = 1; var s = line.split(" "); var fin = 0;
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params); i2 = 1;
            if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { fin = Number(params[i2]); } else { fin = Number(window.WTFCode.evaluate(params[i2].toString(), variables, functions)); };
            for (i2 = 3; i2 < params.length - 1; i2 += 2) { if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { fin -= Number(params[i2]); } else { fin -= Number(window.WTFCode.evaluate(params[i2].toString(), variables, functions)); }; };
            returnValue = fin;
          } else if (instruction.toUpperCase() == "DIVIDE" || instruction.toUpperCase() == "DIV")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = nums.a / nums.b;
          } else if (instruction.toUpperCase() == "MULTIPLY" || instruction.toUpperCase() == "MULT")
          {
            var i2 = 1; var s = line.split(" "); var fin = 1;
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            for (i2 = 1; i2 < params.length - 1; i2 += 2) { if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { fin *= Number(params[i2]); } else { fin *= Number(window.WTFCode.evaluate(params[i2].toString(), variables, functions)); }; };
            returnValue = fin;
          } else if (instruction.toUpperCase() == "MODULUS" || instruction.toUpperCase() == "MODULO" || instruction.toUpperCase() == "MOD")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = nums.a % nums.b;
          } else if (instruction.toUpperCase() == "EQUALS" || instruction.toUpperCase() == "EQUAL" || instruction.toUpperCase() == "EQ")
          {
            var i2 = 1; var s = line.split(" ");
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            if (params[0].toUpperCase() != "RETURNVALUE") { var a = params[1]; } else { var a = window.WTFCode.evaluate(params[1].toString(), variables, functions); };
            if (params[2].toUpperCase() != "RETURNVALUE") { var b = params[3]; } else { var b = window.WTFCode.evaluate(params[3].toString(), variables, functions); };
            returnValue = a == b;
          } else if (instruction.toUpperCase() == "LESSTHAN" || instruction.toUpperCase() == "LESS")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = nums.a < nums.b;
          } else if (instruction.toUpperCase() == "GREATERTHAN" || instruction.toUpperCase() == "GREATER" || instruction.toUpperCase() == "GREATTHAN" || instruction.toUpperCase() == "GREAT")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = nums.a > nums.b;
          } else if (instruction.toUpperCase() == "LESSTHANOREQUAL" || instruction.toUpperCase() == "LESSTHANEQUAL" || instruction.toUpperCase() == "LESSEQUAL" || instruction.toUpperCase() == "LESSEQ")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = nums.a <= nums.b;
          } else if (instruction.toUpperCase() == "GREATERTHANOREQUAL" || instruction.toUpperCase() == "GREATTHANOREQUAL" || instruction.toUpperCase() == "GREATTHANEQUAL" || instruction.toUpperCase() == "GREATEQUAL" || instruction.toUpperCase() == "GREATEQ")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = nums.a >= nums.b;
          } else if (instruction.toUpperCase() == "WHILE")
          {
            var data = parsestat(lines, line, instruction, i);
            i = data.i;
            while (window.WTFCode.evaluate(data.condition, variables, functions)) { var response = window.WTFCode.evaluate(data.toExec, variables, functions); if (response != null) { return response; break; }; };
          } else if (instruction.toUpperCase() == "NOT" || instruction.toUpperCase() == "INVERSE")
          {
            var i2 = 1; var s = line.split(" "); var val = null;
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            if (params[0].toUpperCase() != "RETURNVALUE") { val = params[1]; } else { val = window.WTFCode.evaluate(params[1], variables, functions); };
            returnValue = !val;
          } else if (instruction.toUpperCase() == "AND")
          {
            var data = parsean(line, variables, functions);
            returnValue = data.a && data.b;
          } else if (instruction.toUpperCase() == "OR")
          {
            var data = parsean(line, variables, functions);
            returnValue = data.a || data.b;
          } else if (instruction.toUpperCase() == "RANDOM")
          {
            var nums = parse2num(line, variables, functions);
            returnValue = Math.floor(Math.random() * (nums.b - nums.a + 1) + nums.a);
          } else if (instruction.toUpperCase() == "FLOOR")
          {
            var i2 = 1; var s = line.split(" "); var val = null;
            var logLevel = s[1].toLowerCase();
            var params = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            if (params[0].toUpperCase() != "RETURNVALUE") { val = Number(params[1]); } else { val = Number(window.WTFCode.evaluate(params[1].toString(), variables, functions)); };
            returnValue = Math.floor(val);
          } else if (instruction.toUpperCase() == "UPPER")
          {
            returnValue = parseul(line, variables, functions).toUpperCase();
          } else if (instruction.toUpperCase() == "LOWER")
          {
            returnValue = parseul(line, variables, functions).toLowerCase();
          } else if (instruction.toUpperCase() == "FUNCTION")
          {
            var name = line.split(" ")[1];
            var params = line.trim().substr(instruction.length + name.length + 3, line.trim().length - (instruction.length + name.length + 4));
            var toSave = ""; var depth = 1;
            i++;
            while (depth > 0 && i < lines.length)
            {
              line = lines[i].trim();
              if (line.split(" ")[0].toUpperCase() == "IF" || line.split(" ")[0].toUpperCase() == "WHILE" || line.split(" ")[0].toUpperCase() == "FUNCTION") depth++;
              if (line.split(" ")[0].toUpperCase() == "ESCAPE") depth--;
              if (depth > 0) { toSave += line + "\n"; };
              i++;
            };
            i--;
            var funcObj = {};
            funcObj.code = toSave;
            funcObj.params = params;
            functions[name.toLowerCase()] = funcObj;
          } else if (instruction.toUpperCase() == "EXECCHILDFUNCJS" || instruction.toUpperCase() == "ECFJS")
          {
            var i2 = 1; var s = line.split(" ");
            var params = ""; var fpars = []; var pstr = "";
            for (i2 = 1; i2 < s.length; i2++)
            {
              params += s[i2] + " ";
            };
            params = parseParams(params);
            if (params[0].toUpperCase() == "RETURNVALUE") { var fn = window.WTFCode.evaluate(params[1], variables, functions); } else { var fn = params[1]; };
            for (i2 = 3; i2 < params.length - 1; i2 += 2) { if (params[i2 - 1].toUpperCase() != "RETURNVALUE") { fpars.push(params[i2]); } else { fpars.push(window.WTFCode.evaluate(params[i2].toString(), variables, functions)); }; };
            if (typeof fn == "function") { returnValue = fn.apply(null, fpars); } else { throw new Error("First argument must be js function! (ecfjs)"); };
          } else if (instruction.toUpperCase() == "IMPORT" || instruction.toUpperCase() == "INCLUDE")
          {
            var path = line.substr(instruction.length + 1, (line.length - instruction.length));
            // check if path is local
            if (path.toLowerCase().split("/")[0] == "local")
            {
              var module = path.toLowerCase().split("/")[1];
              // it exis?
              if (modules[module])
              {
                window.WTFCode.evaluate(modules[module], variables, functions);
              } else {
                console.warn("Module " + path + " couldn't load! Does it exis???");
              };
            } else {
              throw new Error("Remote modules are not supported you dumb idiot");
            };
          } else if (functions[instruction.toLowerCase()])
          {
            var i2 = 0;
            var func = functions[instruction.toLowerCase()];
            var varObj = {}; var entries = Object.entries(variables);
            // structuredclone hates functions :((((((((
            for (i2 = 0; i2 < entries.length; i2++) varObj[entries[i2][0]] = entries[i2][1];
            var params = parseParams(line.substr(instruction.length + 1, (line.length - instruction.length + 1)));
            var reqps = func.params.split(" ");
            for (i2 = 0; i2 < reqps.length; i2 += 2)
            {
              if (i2 >= params.length) break;
              if (params[i2].toUpperCase() == reqps[i2].toUpperCase()) { varObj[reqps[i2 + 1]] = params[i2 + 1] } else {
                if (reqps[i2].toUpperCase() == "RETURNVALUE") throw new Error("If a function requests a returnvalue, you gotta give it a returnvalue!");
                var fin = params[i2 + 1];
                if (params[i2].toUpperCase() == "RETURNVALUE") fin = window.WTFCode.evaluate(params[i2 + 1], variables, functions);
                if (reqps[i2].toUpperCase() == "STRING") fin = fin.toString();
                if (reqps[i2].toUpperCase() == "NUMBER") fin = Number(fin);
                varObj[reqps[i2 + 1]] = fin;
              };
            };
            returnValue = window.WTFCode.evaluate(func.code, varObj, functions);
          };
        };
        return returnValue;
      };

      // Auxiliary functions to avoid repetition

      // Used by upper/lower
      function parseul(line, variables, functions)
      {
        var i2 = 1; var s = line.split(" "); var val = null;
        var logLevel = s[1].toLowerCase();
        var params = "";
        for (i2 = 1; i2 < s.length; i2++)
        {
          params += s[i2] + " ";
        };
        params = parseParams(params);
        if (params[0].toUpperCase() != "RETURNVALUE") { val = params[1].toString(); } else { val = window.WTFCode.evaluate(params[1].toString(), variables, functions).toString(); };
        return val;
      };

      // Used by instructions that take two numbers as arguments
      function parse2num(line, variables, functions)
      {
        var i2 = 1; var s = line.split(" "); var a, b;
        var logLevel = s[1].toLowerCase();
        var params = "";
        for (i2 = 1; i2 < s.length; i2++)
        {
          params += s[i2] + " ";
        };
        params = parseParams(params);
        if (params[0].toUpperCase() != "RETURNVALUE") { var a = params[1]; } else { var a = window.WTFCode.evaluate(params[1], variables, functions); };
        if (params[2].toUpperCase() != "RETURNVALUE") { var b = params[3]; } else { var b = window.WTFCode.evaluate(params[3], variables, functions); };
        return {"a": a, "b": b};
      };

      // for and/or
      function parsean(line, variables, functions)
      {
        var i2 = 1; var s = line.split(" "); var a, b;
        var logLevel = s[1].toLowerCase();
        var params = "";
        for (i2 = 1; i2 < s.length; i2++)
        {
          params += s[i2] + " ";
        };
        params = parseParams(params);
        if (params[0].toUpperCase() != "RETURNVALUE") { a = params[1]; } else { a = window.WTFCode.evaluate(params[1], variables, functions); };
        if (params[2].toUpperCase() != "RETURNVALUE") { b = params[3]; } else { b = window.WTFCode.evaluate(params[3], variables, functions); };
        return {"a": a, "b": b};
      };

      // for if/while
      function parsestat(lines, line, instruction, i)
      {
        var condition = line.trim().substr(instruction.length + 2, line.trim().length - (instruction.length + 3));
        var toExec = ""; var depth = 1;
        i++;
        while (depth > 0 && i < lines.length)
        {
          line = lines[i].trim();
          if (line.split(" ")[0].toUpperCase() == "IF" || line.split(" ")[0].toUpperCase() == "WHILE" || line.split(" ")[0].toUpperCase() == "FUNCTION") depth++;
          if (line.split(" ")[0].toUpperCase() == "ESCAPE") depth--;
          if (depth > 0) { toExec += line + "\n"; };
          i++;
        };
        i--;
        return {"condition": condition, "toExec": toExec, "i": i};
      };

      // Function for parsing parameters passed to instructions
      function parseParams(params)
      {
        var pars = params.split(" "); var i = 0;
        var arr = [];
        for (i = 0; i < pars.length; i++)
        {
          var dataType = pars[i]; var value = null;
          if (dataType.toUpperCase() == "NUMBER") i++; value = Number(pars[i]);
          if (dataType.toUpperCase() == "STRING")
          {
            i++; var strf = ""; var ok = true; var ran = false;
            if (pars[i].indexOf("\"") == -1) throw new Error("SyntaxError", "String datatype value must be enclosed within quotes.");
            strf += pars[i].substr(1, pars[i].length) + " ";
            while (ok && pars[i].split("\"").length - 1 < 2)
            {
              ran = true; i++; if (pars[i].indexOf("\"") != -1) { strf += pars[i].substr(0, pars[i].length - 1) + " "; ok = false; } else { strf += pars[i] + " "; };
            };
            var dec = 1; if (!ran) dec = 2;
            strf = strf.substr(0, strf.length - dec);
            value = strf;
          };
          if (dataType.toUpperCase() == "RETURNVALUE")
          {
            var str, execString = ""; var depth = 1; i++; var i2 = 1;
            if (pars[i].indexOf("(") == -1) throw new Error("SyntaxError", "ReturnValue datatype value must be enclosed within brackets.");
            while (depth > 0)
            {
              var ind = pars[i].split("");
              for (i2 = i2; i2 < ind.length; i2++)
              {
                if (ind[i2] == "(") {
                  depth++;
                  if (depth >= 1) execString += ind[i2];
                } else {
                  if (ind[i2] == ")")
                  {
                    depth--;
                    if (depth >= 1) execString += ind[i2];
                  } else {
                    execString += ind[i2];
                  }
                }
              };
              execString += " ";
              i2 = 0; i++;
            };
            value = execString.substr(0, execString.length - 1); i--;
          };
          arr.push(dataType); arr.push(value);
        };
        return arr;
      };
    </script>
  </head>
  <body>

  </body>
</html>
